import{r as t,d as e,c as a,k as s,n as l,B as o,l as r,C as i,e as n,f as c,x as d,q as u,v as m,D as p,F as f,m as g,o as b,g as y,h as v}from"./index.40c9de32.js";import{g as h}from"./getArticle.8ef3b2c4.js";var w=e({name:"EditArticle",setup(){const e=r(),n=i(),c=a((()=>e.params.slug)),d=s({title:"",description:"",body:"",tagList:[]}),u=l("");o((()=>{c.value&&async function(t){const e=await h(t);d.title=e.title,d.description=e.description,d.body=e.body,d.tagList=e.tagList}(c.value)}));return{form:d,onSubmit:async()=>{let e;return e=c.value?await async function(e,a){return t.put("/articles/"+e,{article:a}).then((t=>t.article))}(c.value,d):await async function(e){return t.post("/articles",{article:e}).then((t=>t.article))}(d),n.push({name:"article",params:{slug:e.slug}})},newTag:u,addTag:()=>{d.tagList.push(u.value.trim()),u.value=""},removeTag:t=>{d.tagList=d.tagList.filter((e=>e!==t))}}}});const x={class:"editor-page"},T={class:"container page"},L={class:"row"},k={class:"col-md-10 offset-md-1 col-xs-12"},A={class:"form-group"},C={class:"form-group"},U={class:"form-group"},V={class:"form-group"},S={class:"tag-list"};w.render=function(t,e,a,s,l,o){return b(),n("div",x,[c("div",T,[c("div",L,[c("div",k,[c("form",{onSubmit:e[7]||(e[7]=d(((...e)=>t.onSubmit(...e)),["prevent"]))},[c("fieldset",A,[u(c("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.form.title=e),type:"text",class:"form-control form-control-lg",placeholder:"Article Title"},null,512),[[m,t.form.title]])]),c("fieldset",C,[u(c("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.form.description=e),type:"text",class:"form-control form-control-lg",placeholder:"What's this article about?"},null,512),[[m,t.form.description]])]),c("fieldset",U,[u(c("textarea",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.form.body=e),rows:8,class:"form-control",placeholder:"Write your article (in markdown)"},null,512),[[m,t.form.body]])]),c("fieldset",V,[u(c("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.newTag=e),type:"text",class:"form-control",placeholder:"Enter tags",onChange:e[5]||(e[5]=(...e)=>t.addTag(...e)),onKeypress:e[6]||(e[6]=p(d(((...e)=>t.addTag(...e)),["prevent"]),["enter"]))},null,544),[[m,t.newTag]]),c("div",S,[(b(!0),n(f,null,g(t.form.tagList,(e=>(b(),n("span",{key:e,class:"tag-default tag-pill"},[c("i",{class:"ion-close-round",onClick:a=>t.removeTag(e)},null,8,["onClick"]),y(" "+v(e),1)])))),128))])]),c("button",{class:"btn btn-lg pull-xs-right btn-primary",type:"submit",disabled:!(t.form.title&&t.form.description&&t.form.body)}," Publish Article ",8,["disabled"])],32)])])])])};export default w;

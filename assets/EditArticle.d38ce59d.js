import{g as t}from"./getArticle.2d8491bc.js";import{r as a,d as e,c as l,m as s,v as o,G as r,n as i,H as n,g as c,h as d,z as u,x as m,y as p,I as g,F as f,q as b,o as v,i as y,j as h}from"./index.3a251943.js";var T=e({name:"EditArticlePage",setup(){const e=i(),c=n(),d=l((()=>e.params.slug)),u=s({title:"",description:"",body:"",tagList:[]}),m=o("");r((()=>{d.value&&async function(a){const e=await t(a);u.title=e.title,u.description=e.description,u.body=e.body,u.tagList=e.tagList}(d.value)}));return{form:u,onSubmit:async()=>{let t;return t=d.value?await function(t,e){return a.put(`/articles/${t}`,{article:e}).then((t=>t.article))}(d.value,u):await function(t){return a.post("/articles",{article:t}).then((t=>t.article))}(u),c.push({name:"article",params:{slug:t.slug}})},newTag:m,addTag:()=>{u.tagList.push(m.value.trim()),m.value=""},removeTag:t=>{u.tagList=u.tagList.filter((a=>a!==t))}}}});const w={class:"editor-page"},x={class:"container page"},L={class:"row"},k={class:"col-md-10 offset-md-1 col-xs-12"},A={class:"form-group"},S={class:"form-group"},U={class:"form-group"},V={class:"form-group"},j={class:"tag-list"};T.render=function(t,a,e,l,s,o){return v(),c("div",w,[d("div",x,[d("div",L,[d("div",k,[d("form",{onSubmit:a[7]||(a[7]=u(((...a)=>t.onSubmit&&t.onSubmit(...a)),["prevent"]))},[d("fieldset",A,[m(d("input",{"onUpdate:modelValue":a[1]||(a[1]=a=>t.form.title=a),type:"text",class:"form-control form-control-lg",placeholder:"Article Title"},null,512),[[p,t.form.title]])]),d("fieldset",S,[m(d("input",{"onUpdate:modelValue":a[2]||(a[2]=a=>t.form.description=a),type:"text",class:"form-control form-control-lg",placeholder:"What's this article about?"},null,512),[[p,t.form.description]])]),d("fieldset",U,[m(d("textarea",{"onUpdate:modelValue":a[3]||(a[3]=a=>t.form.body=a),rows:8,class:"form-control",placeholder:"Write your article (in markdown)"},null,512),[[p,t.form.body]])]),d("fieldset",V,[m(d("input",{"onUpdate:modelValue":a[4]||(a[4]=a=>t.newTag=a),type:"text",class:"form-control",placeholder:"Enter tags",onChange:a[5]||(a[5]=(...a)=>t.addTag&&t.addTag(...a)),onKeypress:a[6]||(a[6]=g(u(((...a)=>t.addTag&&t.addTag(...a)),["prevent"]),["enter"]))},null,544),[[p,t.newTag]]),d("div",j,[(v(!0),c(f,null,b(t.form.tagList,(a=>(v(),c("span",{key:a,class:"tag-default tag-pill"},[d("i",{class:"ion-close-round",onClick:e=>t.removeTag(a)},null,8,["onClick"]),y(" "+h(a),1)])))),128))])]),d("button",{class:"btn btn-lg pull-xs-right btn-primary",type:"submit",disabled:!(t.form.title&&t.form.description&&t.form.body)}," Publish Article ",8,["disabled"])],32)])])])])};export default T;

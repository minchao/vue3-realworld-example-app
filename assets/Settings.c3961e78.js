var e=Object.assign;import{r as o,d as l,m as a,G as s,b as t,e as r,a as n,c as u,K as i,g as m,h as c,z as d,x as f,y as p,o as g}from"./index.4623f994.js";var b=l({name:"SettingsPage",setup(){const l=a({});s((async()=>{if(!t(r))return await n("login");l.image=r.value.image,l.username=r.value.username,l.bio=r.value.bio,l.email=r.value.email}));const m=u((()=>{var e,o,a,s;return l.image===(null==(e=r.value)?void 0:e.image)&&l.username===(null==(o=r.value)?void 0:o.username)&&l.bio===(null==(a=r.value)?void 0:a.bio)&&l.email===(null==(s=r.value)?void 0:s.email)&&!l.password}));return{form:l,onSubmit:async()=>{const a=Object.entries(l).reduce(((o,[l,a])=>null===a?o:e(e({},o),{[l]:a})),{}),s=await function(e){return o.put("/user",e).then((e=>e.user))}(a);i(s),await n("profile",{username:s.username})},isButtonDisabled:m,onLogout:async()=>{i(null),await n("global-feed")}}}});const v={class:"settings-page"},h={class:"container page"},w={class:"row"},y={class:"col-md-6 offset-md-3 col-xs-12"},x=c("h1",{class:"text-xs-center"}," Your Settings ",-1),S={class:"form-group"},U={class:"form-group"},V={class:"form-group"},L={class:"form-group"},j={class:"form-group"},O=c("hr",null,null,-1);b.render=function(e,o,l,a,s,t){return g(),m("div",v,[c("div",h,[c("div",w,[c("div",y,[x,c("form",{onSubmit:o[6]||(o[6]=d(((...o)=>e.onSubmit&&e.onSubmit(...o)),["prevent"]))},[c("fieldset",null,[c("fieldset",S,[f(c("input",{"onUpdate:modelValue":o[1]||(o[1]=o=>e.form.image=o),type:"text",class:"form-control",placeholder:"URL of profile picture"},null,512),[[p,e.form.image]])]),c("fieldset",U,[f(c("input",{"onUpdate:modelValue":o[2]||(o[2]=o=>e.form.username=o),type:"text",class:"form-control form-control-lg",placeholder:"Your name"},null,512),[[p,e.form.username]])]),c("fieldset",V,[f(c("textarea",{"onUpdate:modelValue":o[3]||(o[3]=o=>e.form.bio=o),class:"form-control form-control-lg",rows:8,placeholder:"Short bio about you"},null,512),[[p,e.form.bio]])]),c("fieldset",L,[f(c("input",{"onUpdate:modelValue":o[4]||(o[4]=o=>e.form.email=o),type:"email",class:"form-control form-control-lg",placeholder:"Email"},null,512),[[p,e.form.email]])]),c("fieldset",j,[f(c("input",{"onUpdate:modelValue":o[5]||(o[5]=o=>e.form.password=o),type:"password",class:"form-control form-control-lg",placeholder:"New Password"},null,512),[[p,e.form.password]])]),c("button",{class:"btn btn-lg btn-primary pull-xs-right",disabled:e.isButtonDisabled,type:"submit"}," Update Settings ",8,["disabled"])])],32),O,c("button",{class:"btn btn-outline-danger",onClick:o[7]||(o[7]=(...o)=>e.onLogout&&e.onLogout(...o))}," Or click here to logout. ")])])])])};export default b;

import{r as a,A as e,B as n,C as l,D as o,a as t,v as i,E as u}from"./index.ab818456.js";function s({username:i,following:u,onUpdate:s}){const{active:r,run:c}=o((async function(){let o;o=u.value?await async function(o){const t=await a.checkableDelete(`/profiles/${o}/follow`),i=e(t);return i.isOk()?n(i.value.profile):l(i.value)}(i.value):await async function(o){const t=await a.checkablePost(`/profiles/${o}/follow`),i=e(t);return i.isOk()?n(i.value.profile):l(i.value)}(i.value),o.isOk()?s(o.value):await t("login")}));return{followProcessGoing:r,toggleFollow:c}}function r({username:e}){const n=i(null);function l(a){n.value=a}return u(e,(async function(){if(l(null),!e.value)return;l(await function(e){return a.get(`/profiles/${e}`).then((a=>a.profile))}(e.value))}),{immediate:!0}),{profile:n,updateProfile:l}}export{r as a,s as u};
